<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Ğ Ğ°Ğ¼Ğ°Ğ´Ğ°Ğ½ Â· AI/ML Â· Ğ¢Ñ€ĞµĞºĞµÑ€</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Geologica:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#0c0e0d;--s1:#131615;--s2:#191c1a;--s3:#1f2320;
  --border:#252a27;--border2:#2e3530;
  --gold:#c8a45a;--gold2:#e2c882;--gold3:#f0dca0;
  --green:#3a7a4e;--green2:#4d9e65;--green3:#6bbf82;
  --blue:#3a5f8a;--blue2:#5a8abf;--blue3:#82b0e0;
  --red:#8a3a3a;--text:#ddd8ce;--text2:#a8a49c;--muted:#5a5e5b;
  --radius:14px;
}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'Geologica',sans-serif;font-weight:300;min-height:100vh}

/* HERO */
.hero{text-align:center;padding:48px 24px 32px;position:relative}
.hero::before{content:'';position:absolute;top:-60px;left:50%;transform:translateX(-50%);width:500px;height:500px;background:radial-gradient(ellipse,rgba(200,164,90,.06) 0%,transparent 70%);pointer-events:none}
.hero-arabic{font-family:'Amiri',serif;font-size:22px;color:var(--gold);opacity:.6;letter-spacing:3px;margin-bottom:12px}
.hero h1{font-family:'Amiri',serif;font-size:42px;font-weight:700;background:linear-gradient(135deg,var(--gold) 0%,var(--gold3) 50%,var(--gold) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:8px}
.hero-sub{font-size:11px;color:var(--muted);letter-spacing:3px;text-transform:uppercase;margin-bottom:24px}
.hero-divider{margin:0 auto;width:100px;height:1px;background:linear-gradient(90deg,transparent,var(--gold),transparent)}

/* TABS */
.tabs{display:flex;justify-content:center;gap:8px;padding:24px 24px 28px;flex-wrap:wrap}
.tab-btn{background:var(--s2);border:1px solid var(--border);border-radius:100px;padding:9px 20px;font-family:'Geologica',sans-serif;font-size:11px;font-weight:500;letter-spacing:1px;color:var(--text2);cursor:pointer;transition:all .2s;text-transform:uppercase}
.tab-btn:hover{border-color:var(--gold);color:var(--gold)}
.tab-btn.active{background:linear-gradient(135deg,rgba(200,164,90,.15),rgba(200,164,90,.05));border-color:var(--gold);color:var(--gold2)}

/* SECTIONS */
.section{display:none;padding:0 16px 80px;max-width:1200px;margin:0 auto}
.section.active{display:block;animation:fadeIn .3s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

/* STATS ROW */
.stats-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;margin-bottom:24px}
.stat-card{background:var(--s1);border:1px solid var(--border);border-radius:var(--radius);padding:18px 12px;text-align:center;position:relative;overflow:hidden}
.stat-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--accent,var(--gold));opacity:.4}
.stat-num{font-family:'Amiri',serif;font-size:32px;line-height:1;color:var(--accent,var(--gold2));margin-bottom:4px}
.stat-lbl{font-size:9px;color:var(--muted);text-transform:uppercase;letter-spacing:1.5px}

/* SEC HEAD */
.sec-head{display:flex;align-items:center;gap:12px;margin-bottom:16px}
.sec-head h2{font-family:'Amiri',serif;font-size:22px;font-weight:400;color:var(--gold2);white-space:nowrap}
.sec-line{flex:1;height:1px;background:var(--border)}

/* â•â• HABIT CALENDAR â€” 30-day grid â•â• */
.habit-grid-wrap{overflow-x:auto;border-radius:var(--radius);border:1px solid var(--border);background:var(--s1);margin-bottom:20px}
table.htable{width:100%;border-collapse:collapse;table-layout:fixed}
table.htable th,table.htable td{border:1px solid var(--border);text-align:center;font-size:10px;padding:0}
.col-n{width:28px;min-width:28px}.col-name{width:160px;min-width:140px}.col-d{width:25px;min-width:22px}.col-tot{width:44px}.col-pct{width:44px}
.th-week{background:var(--s3);color:var(--gold);font-size:9px;letter-spacing:1.5px;text-transform:uppercase;padding:6px 2px;font-weight:500}
.th-dn{background:var(--s2);color:var(--muted);font-size:8px;padding:4px 1px;font-weight:400;line-height:1.3}
.th-dn.is-today{color:var(--green3);font-weight:700;background:rgba(77,158,101,.12)}
.th-dn.is-future{opacity:.35}
.td-n{background:var(--s2);color:var(--muted);font-size:10px;vertical-align:middle}
.td-name{background:var(--s1);text-align:left;padding:0 8px;font-size:11px;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;height:30px;vertical-align:middle}
.td-name .em{margin-right:5px}
.td-check{height:30px;cursor:pointer;transition:background .1s;position:relative}
.td-check:hover{background:rgba(255,255,255,.03)}
.td-check.future{cursor:default;opacity:.2;pointer-events:none}
.td-check.done{background:var(--row-done,rgba(58,122,78,.2))}
.td-check .ck{width:100%;height:100%;display:flex;align-items:center;justify-content:center}
.td-check.done .ck::after{content:'âœ“';font-size:11px;font-weight:700;color:var(--row-color,var(--green3))}
.td-check.is-today{border-left:1.5px solid rgba(107,191,130,.5)!important;border-right:1.5px solid rgba(107,191,130,.5)!important}
.td-tot{background:var(--s2);color:var(--gold2);font-size:11px;font-weight:500;vertical-align:middle}
.td-pct{background:var(--s2);font-size:10px;font-weight:500;vertical-align:middle}
.tr-foot td{background:var(--s3);color:var(--text2);padding:4px 2px;font-size:9px;height:24px;vertical-align:middle}
.tr-foot .foot-lbl{text-align:left;padding-left:8px;color:var(--gold);font-size:8px;letter-spacing:.5px;text-transform:uppercase}

/* â•â• DAY VIEW â•â• */
.day-nav{display:flex;align-items:center;gap:10px;margin-bottom:20px;flex-wrap:wrap}
.day-nav-btn{background:var(--s2);border:1px solid var(--border);border-radius:8px;padding:8px 14px;color:var(--text2);cursor:pointer;font-size:12px;font-family:'Geologica',sans-serif;transition:all .15s}
.day-nav-btn:hover{border-color:var(--gold);color:var(--gold)}
.day-nav-btn:disabled{opacity:.3;cursor:default}
.day-nav-label{font-family:'Amiri',serif;font-size:20px;color:var(--gold2);flex:1;text-align:center}
.day-nav-dots{display:flex;gap:4px;justify-content:center;flex-wrap:wrap;margin-bottom:16px}
.day-dot{width:22px;height:22px;border-radius:6px;border:1px solid var(--border);cursor:pointer;font-size:9px;color:var(--muted);display:flex;align-items:center;justify-content:center;transition:all .15s;background:var(--s2)}
.day-dot:hover{border-color:var(--gold);color:var(--gold)}
.day-dot.active-dot{border-color:var(--gold2);background:rgba(200,164,90,.15);color:var(--gold2);font-weight:600}
.day-dot.done-dot{background:rgba(58,122,78,.2);border-color:var(--green2);color:var(--green3)}
.day-dot.done-dot.active-dot{border-color:var(--gold2)}
.day-dot.future-dot{opacity:.3;cursor:default;pointer-events:none}

.day-card-big{background:var(--s1);border:1px solid var(--border);border-radius:var(--radius);padding:24px;margin-bottom:16px}
.day-card-date{font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:2px;margin-bottom:4px}
.day-card-title{font-family:'Amiri',serif;font-size:26px;color:var(--gold2);margin-bottom:20px}

.habits-day-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px}
.habit-day-item{background:var(--s2);border:1px solid var(--border);border-radius:10px;padding:14px;cursor:pointer;transition:all .15s;display:flex;align-items:center;gap:12px}
.habit-day-item:hover{border-color:var(--gold);background:rgba(200,164,90,.05)}
.habit-day-item.done-habit{border-color:var(--green2);background:rgba(58,122,78,.12)}
.habit-day-item.future-habit{opacity:.3;pointer-events:none}
.habit-day-cb{width:20px;height:20px;border:1.5px solid var(--border2);border-radius:5px;flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:all .15s}
.habit-day-item.done-habit .habit-day-cb{background:var(--green);border-color:var(--green)}
.habit-day-item.done-habit .habit-day-cb::after{content:'âœ“';color:#fff;font-size:11px;font-weight:700}
.habit-day-name{font-size:12px;color:var(--text)}
.habit-day-item.done-habit .habit-day-name{color:var(--green3)}

.day-progress{background:var(--s1);border:1px solid var(--border);border-radius:var(--radius);padding:16px 20px;margin-bottom:16px}
.day-prog-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:12px;color:var(--text2)}
.day-prog-row span{color:var(--gold2);font-weight:500}
.prog-bar{width:100%;height:5px;background:var(--border2);border-radius:3px;overflow:hidden}
.prog-fill{height:100%;background:linear-gradient(90deg,var(--green),var(--green3));border-radius:3px;transition:width .4s}

/* â•â• AI/ML â•â• */
.week-block{margin-bottom:32px}
.week-title{display:flex;align-items:center;gap:10px;margin-bottom:14px;font-size:10px;font-weight:600;letter-spacing:2px;text-transform:uppercase;color:var(--blue3)}
.week-title::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,var(--border2),transparent)}
.days-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:10px}
.ml-card{background:var(--s1);border:1px solid var(--border);border-radius:12px;padding:14px;position:relative;overflow:hidden;transition:border-color .15s}
.ml-card::before{content:'';position:absolute;left:0;top:0;bottom:0;width:3px;background:var(--blue2);opacity:.4;transition:opacity .2s}
.ml-card.done-card{background:rgba(58,95,138,.08);border-color:rgba(90,138,191,.3)}
.ml-card.done-card::before{opacity:1}
.ml-card:hover{border-color:var(--blue2)}
.ml-card-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.ml-daynum{font-size:9px;color:var(--muted);font-weight:500;letter-spacing:1px;text-transform:uppercase}
.ml-badge{font-size:8px;background:rgba(90,138,191,.2);color:var(--blue3);border:1px solid rgba(90,138,191,.3);border-radius:100px;padding:2px 7px}
.ml-topic{font-size:12px;font-weight:500;color:var(--text);margin-bottom:8px}
.ml-tasks{list-style:none}
.ml-task{display:flex;align-items:flex-start;gap:8px;padding:5px 0;border-bottom:1px solid var(--border);cursor:pointer}
.ml-task:last-child{border-bottom:none}
.ml-task.future-task{opacity:.35;pointer-events:none}
.ml-task-cb{width:13px;height:13px;border:1.5px solid var(--border2);border-radius:3px;flex-shrink:0;margin-top:1px;display:flex;align-items:center;justify-content:center;transition:all .12s}
.ml-task.done-task .ml-task-cb{background:var(--blue2);border-color:var(--blue2)}
.ml-task.done-task .ml-task-cb::after{content:'âœ“';color:#fff;font-size:8px}
.ml-task.done-task .ml-task-text{text-decoration:line-through;color:var(--muted)}
.ml-task-text{font-size:11px;color:var(--text2);line-height:1.5}

/* OVERVIEW */
.two-col{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:20px}
.mini-card{background:var(--s1);border:1px solid var(--border);border-radius:var(--radius);padding:18px}
.mini-card-title{font-size:9px;text-transform:uppercase;letter-spacing:1.5px;color:var(--gold);margin-bottom:12px;font-weight:500}
.mini-row{display:flex;align-items:center;justify-content:space-between;padding:6px 0;border-bottom:1px solid var(--border);font-size:11px}
.mini-row:last-child{border-bottom:none}
.mini-name{display:flex;align-items:center;gap:6px;color:var(--text2);font-size:11px}
.mini-bar{flex:1;height:3px;background:var(--border2);border-radius:2px;margin:0 10px;overflow:hidden}
.mini-fill{height:100%;border-radius:2px;transition:width .4s}
.mini-pct{font-size:10px;font-weight:500;min-width:30px;text-align:right}

.today-wrap{background:linear-gradient(135deg,rgba(200,164,90,.05),rgba(58,95,138,.05));border:1px solid var(--border2);border-radius:var(--radius);padding:20px;margin-bottom:20px}
.today-lbl{font-size:9px;text-transform:uppercase;letter-spacing:2px;color:var(--gold);margin-bottom:4px}
.today-title{font-family:'Amiri',serif;font-size:20px;color:var(--text);margin-bottom:14px}
.today-cols{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.today-col-title{font-size:9px;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:8px}

.prog-wrap{background:var(--s1);border:1px solid var(--border);border-radius:var(--radius);padding:16px 20px;margin-bottom:20px}
.prog-lbl{display:flex;justify-content:space-between;margin-bottom:8px;font-size:11px;color:var(--text2)}
.prog-lbl span{color:var(--gold2);font-weight:500}

code.ic{background:rgba(90,138,191,.15);color:var(--blue3);padding:1px 5px;border-radius:4px;font-family:monospace;font-size:10px}

::-webkit-scrollbar{width:5px;height:5px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--border2);border-radius:3px}

@media(max-width:680px){
  .hero h1{font-size:32px}
  .two-col,.today-cols{grid-template-columns:1fr}
  .days-list{grid-template-columns:1fr}
  .col-name{width:120px;min-width:100px}
}
</style>
</head>
<body>

<div class="hero">
  <div class="hero-arabic">Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… Â· Ø¹Ù„Ù… ÙˆÙ†Ù…Ùˆ</div>
  <h1>Ğ Ğ°Ğ¼Ğ°Ğ´Ğ°Ğ½ + AI/ML</h1>
  <div class="hero-sub">30 Ğ´Ğ½ĞµĞ¹ Â· Ğ¿Ñ€Ğ¸Ğ²Ñ‹Ñ‡ĞºĞ¸ Â· Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Â· Ñ€Ğ¾ÑÑ‚</div>
  <div class="hero-divider"></div>
</div>

<div class="tabs">
  <button class="tab-btn active" onclick="showTab('overview',this)">ğŸ“Š ĞĞ±Ğ·Ğ¾Ñ€</button>
  <button class="tab-btn" onclick="showTab('day',this)">ğŸ“… ĞŸĞ¾ Ğ´Ğ½ÑĞ¼</button>
  <button class="tab-btn" onclick="showTab('calendar',this)">ğŸ—“ ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ</button>
  <button class="tab-btn" onclick="showTab('aiml',this)">ğŸ§  AI / ML</button>
</div>

<!-- â•â•â• OVERVIEW â•â•â• -->
<div class="section active" id="tab-overview">
  <div class="stats-row">
    <div class="stat-card" style="--accent:var(--gold2)"><div class="stat-num" id="ov-day">â€”</div><div class="stat-lbl">Ğ”ĞµĞ½ÑŒ Ğ Ğ°Ğ¼Ğ°Ğ´Ğ°Ğ½Ğ°</div></div>
    <div class="stat-card" style="--accent:var(--green3)"><div class="stat-num" id="ov-habits">0%</div><div class="stat-lbl">ĞŸÑ€Ğ¸Ğ²Ñ‹Ñ‡ĞºĞ¸ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ</div></div>
    <div class="stat-card" style="--accent:var(--blue3)"><div class="stat-num" id="ov-ml">0%</div><div class="stat-lbl">AI/ML Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ</div></div>
    <div class="stat-card" style="--accent:var(--gold)"><div class="stat-num" id="ov-streak">0ğŸ”¥</div><div class="stat-lbl">Ğ¡ĞµÑ€Ğ¸Ñ Ğ´Ğ½ĞµĞ¹</div></div>
  </div>

  <div class="today-wrap">
    <div class="today-lbl">Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ â€” <span id="td-date">â€”</span></div>
    <div class="today-title" id="td-mltopic">â€”</div>
    <div class="today-cols">
      <div><div class="today-col-title">ğŸŒ™ ĞŸÑ€Ğ¸Ğ²Ñ‹Ñ‡ĞºĞ¸</div><div id="td-habits-list"></div></div>
      <div><div class="today-col-title">ğŸ§  AI/ML Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸</div><div id="td-ml-list"></div></div>
    </div>
  </div>

  <div class="prog-wrap">
    <div class="prog-lbl">ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ <span id="ov-total-pct">0%</span></div>
    <div class="prog-bar"><div class="prog-fill" id="ov-prog-fill" style="width:0%"></div></div>
  </div>

  <div class="two-col">
    <div class="mini-card">
      <div class="mini-card-title">ğŸŒ™ ĞŸÑ€Ğ¸Ğ²Ñ‹Ñ‡ĞºĞ¸ â€” ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°</div>
      <div id="habit-mini-list"></div>
    </div>
    <div class="mini-card">
      <div class="mini-card-title">ğŸ§  AI/ML â€” Ğ¿Ğ¾ Ğ½ĞµĞ´ĞµĞ»ÑĞ¼</div>
      <div id="mlweek-mini-list"></div>
    </div>
  </div>
</div>

<!-- â•â•â• DAY VIEW â•â•â• -->
<div class="section" id="tab-day">
  <div class="day-nav">
    <button class="day-nav-btn" id="btn-prev" onclick="changeDay(-1)">â† ĞŸÑ€ĞµĞ´</button>
    <div class="day-nav-label" id="day-nav-label">Ğ”ĞµĞ½ÑŒ 1</div>
    <button class="day-nav-btn" id="btn-next" onclick="changeDay(1)">Ğ¡Ğ»ĞµĞ´ â†’</button>
  </div>

  <div class="day-nav-dots" id="day-dots"></div>

  <div class="day-progress">
    <div class="day-prog-row">Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ <span id="dv-done-count">0/9</span></div>
    <div class="prog-bar"><div class="prog-fill" id="dv-prog" style="width:0%"></div></div>
  </div>

  <div class="day-card-big">
    <div class="day-card-date" id="dv-date">â€”</div>
    <div class="day-card-title" id="dv-title">Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸ Ğ´ĞµĞ½ÑŒ</div>
    <div class="habits-day-grid" id="dv-habits"></div>
  </div>
</div>

<!-- â•â•â• CALENDAR (30-day grid) â•â•â• -->
<div class="section" id="tab-calendar">
  <div class="stats-row">
    <div class="stat-card" style="--accent:var(--green3)"><div class="stat-num" id="cal-today">0/0</div><div class="stat-lbl">Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ</div></div>
    <div class="stat-card" style="--accent:var(--gold2)"><div class="stat-num" id="cal-total">0</div><div class="stat-lbl">Ğ’ÑĞµĞ³Ğ¾ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾</div></div>
    <div class="stat-card" style="--accent:var(--gold)"><div class="stat-num" id="cal-streak">0</div><div class="stat-lbl">Ğ›ÑƒÑ‡ÑˆĞ°Ñ ÑĞµÑ€Ğ¸Ñ ğŸ”¥</div></div>
    <div class="stat-card" style="--accent:var(--green2)"><div class="stat-num" id="cal-pct">0%</div><div class="stat-lbl">ĞĞ±Ñ‰Ğ¸Ğ¹ %</div></div>
  </div>
  <div class="sec-head"><div class="sec-line"></div><h2>ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ ĞºĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ 30 Ğ´Ğ½ĞµĞ¹</h2><div class="sec-line"></div></div>
  <div class="habit-grid-wrap">
    <table class="htable" id="htable">
      <colgroup id="hcg"></colgroup>
      <thead id="hthead"></thead>
      <tbody id="htbody"></tbody>
      <tfoot id="htfoot"></tfoot>
    </table>
  </div>
</div>

<!-- â•â•â• AI/ML â•â•â• -->
<div class="section" id="tab-aiml">
  <div class="stats-row">
    <div class="stat-card" style="--accent:var(--blue3)"><div class="stat-num" id="ml-done">0</div><div class="stat-lbl">Ğ”Ğ½ĞµĞ¹ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾</div></div>
    <div class="stat-card" style="--accent:var(--blue2)"><div class="stat-num" id="ml-tasks">0</div><div class="stat-lbl">Ğ—Ğ°Ğ´Ğ°Ñ‡ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾</div></div>
    <div class="stat-card" style="--accent:var(--blue3)"><div class="stat-num" id="ml-pct">0%</div><div class="stat-lbl">ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ</div></div>
    <div class="stat-card" style="--accent:var(--gold)"><div class="stat-num" id="ml-week">1</div><div class="stat-lbl">Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ½ĞµĞ´ĞµĞ»Ñ</div></div>
  </div>
  <div class="prog-wrap">
    <div class="prog-lbl">ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ AI/ML Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ <span id="ml-prog-pct">0%</span></div>
    <div class="prog-bar"><div class="prog-fill" id="ml-prog-fill" style="width:0%;background:linear-gradient(90deg,var(--blue),var(--blue3))"></div></div>
  </div>
  <div id="ml-container"></div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATES â€” Ğ Ğ°Ğ¼Ğ°Ğ´Ğ°Ğ½ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ÑÑ 19 Ñ„ĞµĞ²Ñ€Ğ°Ğ»Ñ 2026
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const RAMADAN_START = new Date(2026, 1, 19); // Ğ¼ĞµÑÑÑ† 0-Ğ¸Ğ½Ğ´ĞµĞºÑ, 1 = Ñ„ĞµĞ²Ñ€Ğ°Ğ»ÑŒ

function getTodayIdx() {
  const now = new Date();
  const diffMs = now - RAMADAN_START;
  const diffDays = Math.floor(diffMs / (1000*60*60*24));
  return Math.max(0, Math.min(29, diffDays)); // 0-29
}

function getDayDate(idx) {
  const d = new Date(RAMADAN_START);
  d.setDate(d.getDate() + idx);
  return d;
}

function formatDate(d) {
  const months = ['ÑĞ½Ğ²','Ñ„ĞµĞ²','Ğ¼Ğ°Ñ€','Ğ°Ğ¿Ñ€','Ğ¼Ğ°Ğ¹','Ğ¸ÑĞ½','Ğ¸ÑĞ»','Ğ°Ğ²Ğ³','ÑĞµĞ½','Ğ¾ĞºÑ‚','Ğ½Ğ¾Ñ','Ğ´ĞµĞº'];
  const days = ['Ğ’Ñ','ĞŸĞ½','Ğ’Ñ‚','Ğ¡Ñ€','Ğ§Ñ‚','ĞŸÑ‚','Ğ¡Ğ±'];
  return `${days[d.getDay()]}, ${d.getDate()} ${months[d.getMonth()]}`;
}

const TODAY_IDX = getTodayIdx();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const HABITS = [
  { name:'Ğ˜Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ĞšĞ¾Ñ€Ğ°Ğ½Ğ°', emoji:'ğŸ“–', color:'#c8a45a', doneBg:'rgba(200,164,90,.15)' },
  { name:'ĞĞ°Ğ¼Ğ°Ğ· (Ğ²ÑĞµ 5)',   emoji:'ğŸ•Œ', color:'#a07840', doneBg:'rgba(160,120,64,.15)' },
  { name:'Ğ¢Ğ°Ñ€Ğ°Ğ²Ğ¸Ñ… Ğ½Ğ°Ğ¼Ğ°Ğ·',  emoji:'ğŸŒ™', color:'#9e844a', doneBg:'rgba(158,132,74,.15)' },
  { name:'Ğ¡Ğ¿Ğ¾Ñ€Ñ‚',          emoji:'ğŸƒ', color:'#3d7a4e', doneBg:'rgba(61,122,78,.15)' },
  { name:'ĞšĞ¾Ğ´Ğ¸Ğ½Ğ³ / Ğ˜Ğ˜',   emoji:'ğŸ’»', color:'#3a5f8a', doneBg:'rgba(58,95,138,.15)' },
  { name:'Ğ‘ĞµĞ· ÑĞ°Ñ…Ğ°Ñ€Ğ°',     emoji:'ğŸš«', color:'#8a3a3a', doneBg:'rgba(138,58,58,.15)' },
  { name:'Ğ‘ĞµĞ· Ğ´Ğ¾Ğ¿. Ğ´Ğ¾Ñ„Ğ°Ğ¼Ğ¸Ğ½Ğ°', emoji:'ğŸ“µ', color:'#6b4a8b', doneBg:'rgba(107,74,139,.15)' },
  { name:'Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ğ¡Ğ¢Ğ’',     emoji:'ğŸ¬', color:'#7c4a68', doneBg:'rgba(124,74,104,.15)' },
  { name:'Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ Substack',emoji:'ğŸ“°', color:'#4a7c6b', doneBg:'rgba(74,124,107,.15)' },
];

const ML_WEEKS = [
  { title:'ğŸ“Š ĞĞµĞ´ĞµĞ»Ñ 1 â€” Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ğµ', days:[
    { topic:'Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ ML', tasks:['Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Python 3.11','Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ VS Code / Jupyter','ĞŸĞ¾Ğ½ÑÑ‚ÑŒ pipeline: data â†’ model â†’ loss','Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ CSV Ğ¸ Ğ¿Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ head()'] },
    { topic:'Pandas / NumPy', tasks:['Pandas: select, filter, groupby','NumPy: mean, std','ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ data loader'] },
    { topic:'Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ', tasks:['Matplotlib','ĞŸĞ¾ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ 3 Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ°','ĞŸĞ¾Ğ½ÑÑ‚ÑŒ, Ñ‡Ñ‚Ğ¾ Ğ³Ğ¾Ğ²Ğ¾Ñ€ÑÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ'] },
    { topic:'Loss Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸', tasks:['MSE, MAE','ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ»Ğ¾Ğ³Ğ°Ñ€Ğ¸Ñ„Ğ¼Ñ‹ Ğ²Ğ°Ğ¶Ğ½Ñ‹','ĞŸĞ¾ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ loss Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ'] },
    { topic:'Ğ“Ñ€Ğ°Ğ´Ğ¸ĞµĞ½Ñ‚', tasks:['Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ gradient descent','Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ Ğ½ÑƒĞ»Ñ'] },
    { topic:'Overfitting', tasks:['Train / val / test','Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ¿ĞµÑ€ĞµĞ¾Ğ±ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ'] },
    { topic:'Ğ ĞµÑ„Ğ»ĞµĞºÑĞ¸Ñ ĞĞµĞ´.1', tasks:['Ğ§Ñ‚Ğ¾ Ğ¿Ğ¾Ğ½ÑĞ»','Ğ“Ğ´Ğµ Ğ±Ñ‹Ğ»Ğ¾ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾','Ğ§Ñ‚Ğ¾ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ'] },
  ]},
  { title:'ğŸ¤– ĞĞµĞ´ĞµĞ»Ñ 2 â€” ĞšĞ»Ğ°ÑÑĞ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ML', days:[
    { topic:'Linear Regression', tasks:['ĞĞ±ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ','ĞŸĞ¾ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ MSE'] },
    { topic:'Logistic Regression', tasks:['Classification','Accuracy vs ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾'] },
    { topic:'Decision Trees', tasks:['ĞĞ±ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´ĞµÑ€ĞµĞ²Ğ¾','ĞŸĞµÑ€ĞµĞ¾Ğ±ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞµĞ³Ğ¾'] },
    { topic:'Random Forest', tasks:['ĞŸĞ¾Ğ½ÑÑ‚ÑŒ Ğ°Ğ½ÑĞ°Ğ¼Ğ±Ğ»Ğ¸','Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ Ñ Ğ´ĞµÑ€ĞµĞ²Ğ¾Ğ¼'] },
    { topic:'ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸', tasks:['Precision','Recall','F1','ROC-AUC'] },
    { topic:'Feature Engineering', tasks:['Ğ£Ğ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ','Ğ£Ğ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºÑƒ Ğ±ĞµĞ· ÑĞ¼ĞµĞ½Ñ‹ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸'] },
    { topic:'ĞœĞ¸Ğ½Ğ¸-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚', tasks:['ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€','ĞšĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ Ğ²Ñ‹Ğ²Ğ¾Ğ´ (5 ÑÑ‚Ñ€Ğ¾Ğº)'] },
  ]},
  { title:'ğŸ”¥ ĞĞµĞ´ĞµĞ»Ñ 3 â€” Deep Learning (PyTorch)', days:[
    { topic:'PyTorch Ğ±Ğ°Ğ·Ğ¾Ğ²Ğ¾', tasks:['Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ PyTorch','Tensor vs numpy'] },
    { topic:'ĞœĞ¾Ğ´ĞµĞ»ÑŒ', tasks:['nn.Module','forward()'] },
    { topic:'ĞĞ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ', tasks:['Loss','Optimizer','Backprop'] },
    { topic:'Training Loop', tasks:['ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ loop Ñ€ÑƒĞºĞ°Ğ¼Ğ¸','Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ loss'] },
    { topic:'Regularization', tasks:['Dropout','Weight decay'] },
    { topic:'Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸', tasks:['Ğ£Ğ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ½Ğ° +5â€“10%'] },
    { topic:'ĞœĞ¸Ğ½Ğ¸-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ DL', tasks:['ĞĞ±ÑƒÑ‡Ğ¸Ñ‚ÑŒ DL-Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ','Ğ“Ñ€Ğ°Ñ„Ğ¸Ğº Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ'] },
  ]},
  { title:'ğŸ§© ĞĞµĞ´ĞµĞ»Ñ 4 â€” LLM Ğ¸ Ğ¿Ñ€Ğ¾Ñ„-Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ğµ', days:[
    { topic:'ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ LLM', tasks:['Tokens','Context','Temperature'] },
    { topic:'Prompt Engineering', tasks:['Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ prompts','Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹'] },
    { topic:'Embeddings', tasks:['Vector search','Similarity'] },
    { topic:'RAG', tasks:['Ğ‘Ğ°Ğ·Ğ° + LLM','ĞœĞ¸Ğ½Ğ¸-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚'] },
    { topic:'Fine-tuning', tasks:['Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ LoRA','ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ full fine-tune â€” Ğ¾ÑˆĞ¸Ğ±ĞºĞ°'] },
    { topic:'ĞÑˆĞ¸Ğ±ĞºĞ¸ LLM', tasks:['Hallucinations','Evaluation'] },
    { topic:'MLOps Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ğµ', tasks:['Ğ›Ğ¾Ğ³Ğ¸','Ğ’ĞµÑ€ÑĞ¸Ğ¸','Ğ­ĞºÑĞ¿ĞµÑ€Ğ¸Ğ¼ĞµĞ½Ñ‚Ñ‹'] },
  ]},
  { title:'ğŸ† Ğ¤Ğ¸Ğ½Ğ°Ğ»', days:[
    { topic:'Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚', tasks:['Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ','ĞœĞ¾Ğ´ĞµĞ»ÑŒ','ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ°','Ğ’Ñ‹Ğ²Ğ¾Ğ´Ñ‹'] },
    { topic:'Ğ˜Ñ‚Ğ¾Ğ³ 30 Ğ´Ğ½ĞµĞ¹', tasks:['Ğ§Ñ‚Ğ¾ ÑƒĞ¼ĞµÑ','Ğ“Ğ´Ğµ ÑĞ»Ğ°Ğ±','ĞŸĞ»Ğ°Ğ½ Ğ½Ğ° 90 Ğ´Ğ½ĞµĞ¹'] },
  ]},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let habitGrid = HABITS.map(() => Array(30).fill(0));
let mlTasks = {};
let currentDayView = TODAY_IDX;

try {
  const sg = localStorage.getItem('rmdn2_habits');
  if (sg) habitGrid = JSON.parse(sg);
  const sm = localStorage.getItem('rmdn2_ml');
  if (sm) mlTasks = JSON.parse(sm);
  const sd = localStorage.getItem('rmdn2_dayview');
  if (sd) currentDayView = Math.min(TODAY_IDX, parseInt(sd));
} catch(e) {}

function save() {
  try {
    localStorage.setItem('rmdn2_habits', JSON.stringify(habitGrid));
    localStorage.setItem('rmdn2_ml', JSON.stringify(mlTasks));
    localStorage.setItem('rmdn2_dayview', currentDayView);
  } catch(e) {}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function pctColor(p) {
  if (p >= 80) return 'var(--green3)';
  if (p >= 50) return 'var(--gold2)';
  return '#8a3a3a';
}

function getBestStreak() {
  let best = 0, cur = 0;
  for (let d = 0; d <= TODAY_IDX; d++) {
    const allDone = HABITS.every((_, hi) => habitGrid[hi][d]);
    if (allDone) { cur++; best = Math.max(best, cur); } else cur = 0;
  }
  return best;
}

function getMlStats() {
  let totalTasks = 0, doneTasks = 0, doneDays = 0;
  ML_WEEKS.forEach((w, wi) => {
    w.days.forEach((day, di) => {
      const dayDone = day.tasks.filter((_, ti) => mlTasks[`${wi}_${di}_${ti}`]).length;
      totalTasks += day.tasks.length;
      doneTasks += dayDone;
      if (dayDone === day.tasks.length) doneDays++;
    });
  });
  return { totalTasks, doneTasks, doneDays };
}

function getDayML(idx) {
  let count = 0;
  for (let wi = 0; wi < ML_WEEKS.length; wi++) {
    for (let di = 0; di < ML_WEEKS[wi].days.length; di++) {
      if (count === idx) return { wi, di, day: ML_WEEKS[wi].days[di] };
      count++;
    }
  }
  return null;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER DAY VIEW
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderDayView() {
  const idx = currentDayView;
  const d = getDayDate(idx);
  const isFuture = idx > TODAY_IDX;

  document.getElementById('day-nav-label').textContent = `Ğ”ĞµĞ½ÑŒ ${idx + 1} â€” ${formatDate(d)}`;
  document.getElementById('dv-date').textContent = formatDate(d) + (isFuture ? ' Â· Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ' : idx === TODAY_IDX ? ' Â· ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ' : '');
  const mlDay = getDayML(idx);
  document.getElementById('dv-title').textContent = mlDay ? mlDay.day.topic : `Ğ”ĞµĞ½ÑŒ ${idx+1}`;

  // Dots
  const dotsEl = document.getElementById('day-dots');
  dotsEl.innerHTML = Array.from({length:30}, (_, i) => {
    const done = HABITS.every((_, hi) => habitGrid[hi][i]);
    const isFut = i > TODAY_IDX;
    let cls = 'day-dot';
    if (i === idx) cls += ' active-dot';
    if (done && !isFut) cls += ' done-dot';
    if (isFut) cls += ' future-dot';
    return `<div class="${cls}" onclick="goToDay(${i})">${i+1}</div>`;
  }).join('');

  // Progress
  const doneCnt = HABITS.filter((_, hi) => habitGrid[hi][idx]).length;
  const pct = Math.round(doneCnt / HABITS.length * 100);
  document.getElementById('dv-done-count').textContent = `${doneCnt}/${HABITS.length}`;
  document.getElementById('dv-prog').style.width = pct + '%';

  // Habits grid
  document.getElementById('dv-habits').innerHTML = HABITS.map((h, hi) => {
    const done = habitGrid[hi][idx];
    let cls = 'habit-day-item';
    if (done) cls += ' done-habit';
    if (isFuture) cls += ' future-habit';
    return `<div class="${cls}" onclick="toggleHabit(${hi},${idx})" style="--hcolor:${h.color}">
      <div class="habit-day-cb" style="${done?`background:${h.color};border-color:${h.color}`:''}"></div>
      <div class="habit-day-name">${h.emoji} ${h.name}</div>
    </div>`;
  }).join('');

  document.getElementById('btn-prev').disabled = idx === 0;
  document.getElementById('btn-next').disabled = idx === TODAY_IDX;
}

function changeDay(dir) {
  currentDayView = Math.max(0, Math.min(TODAY_IDX, currentDayView + dir));
  save();
  renderDayView();
}

function goToDay(i) {
  if (i > TODAY_IDX) return;
  currentDayView = i;
  save();
  renderDayView();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER CALENDAR TABLE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderCalendar() {
  const cg = document.getElementById('hcg');
  cg.innerHTML = '<col class="col-n"/><col class="col-name"/>' +
    Array(30).fill('<col class="col-d"/>').join('') +
    '<col class="col-tot"/><col class="col-pct"/>';

  // Week header
  let wRow = '<tr>';
  wRow += '<th class="th-week" colspan="2">ĞŸÑ€Ğ¸Ğ²Ñ‹Ñ‡ĞºĞ¸</th>';
  [7,7,7,7,2].forEach((s,wi) => {
    wRow += `<th class="th-week" colspan="${s}">ĞĞµĞ´ ${wi+1}</th>`;
  });
  wRow += '<th class="th-week" colspan="2">Ğ˜Ñ‚Ğ¾Ğ³</th></tr>';

  // Day header
  let dRow = '<tr><th class="th-dn" style="color:var(--muted)">â„–</th><th class="th-dn" style="text-align:left;padding-left:6px">ĞŸÑ€Ğ¸Ğ²Ñ‹Ñ‡ĞºĞ°</th>';
  for (let d = 0; d < 30; d++) {
    const date = getDayDate(d);
    const isFuture = d > TODAY_IDX;
    const isToday = d === TODAY_IDX;
    let cls = 'th-dn';
    if (isToday) cls += ' is-today';
    if (isFuture) cls += ' is-future';
    dRow += `<th class="${cls}">${d+1}<br><span style="font-size:7px;opacity:.6">${formatDate(date).split(', ')[0]}</span></th>`;
  }
  dRow += '<th class="th-dn">Ğ”Ğ½ĞµĞ¹</th><th class="th-dn">%</th></tr>';

  document.getElementById('hthead').innerHTML = wRow + dRow;

  // Body
  let html = '';
  HABITS.forEach((h, hi) => {
    const rowDone = habitGrid[hi].slice(0, TODAY_IDX+1).reduce((a,b)=>a+b,0);
    const avail = TODAY_IDX + 1;
    const pct = avail > 0 ? Math.round(rowDone/avail*100) : 0;
    html += '<tr>';
    html += `<td class="td-n">${hi+1}</td>`;
    html += `<td class="td-name"><span class="em">${h.emoji}</span>${h.name}</td>`;
    for (let d = 0; d < 30; d++) {
      const isFuture = d > TODAY_IDX;
      const isDone = habitGrid[hi][d] === 1;
      const isToday = d === TODAY_IDX;
      let cls = 'td-check';
      if (isDone) cls += ' done';
      if (isFuture) cls += ' future';
      if (isToday) cls += ' is-today';
      const style = isDone ? `--row-color:${h.color};--row-done:${h.doneBg}` : '';
      const click = isFuture ? '' : `onclick="toggleHabit(${hi},${d})"`;
      html += `<td class="${cls}" style="${style}" ${click}><div class="ck"></div></td>`;
    }
    html += `<td class="td-tot">${rowDone}</td>`;
    html += `<td class="td-pct" style="color:${pctColor(pct)}">${pct}%</td>`;
    html += '</tr>';
  });
  document.getElementById('htbody').innerHTML = html;

  // Footer
  const doneByDay = Array(30).fill(0);
  HABITS.forEach((_, hi) => {
    for (let d = 0; d <= TODAY_IDX; d++) if (habitGrid[hi][d]) doneByDay[d]++;
  });
  let fHTML = '';
  [
    ['Ğ¡Ğ´ĞµĞ»Ğ°Ğ½Ğ¾', d => d <= TODAY_IDX ? doneByDay[d] : ''],
    ['% Ğ´Ğ½Ñ',   d => d <= TODAY_IDX ? Math.round(doneByDay[d]/HABITS.length*100)+'%' : ''],
  ].forEach(([lbl, fn]) => {
    fHTML += '<tr class="tr-foot"><td></td><td class="foot-lbl">'+lbl+'</td>';
    for (let d = 0; d < 30; d++) {
      const v = fn(d);
      let col = '';
      if (typeof v === 'string' && v.includes('%')) { const n=parseInt(v); col=`style="color:${pctColor(n)}"`; }
      fHTML += `<td ${col} style="font-size:9px">${v}</td>`;
    }
    fHTML += '<td></td><td></td></tr>';
  });
  document.getElementById('htfoot').innerHTML = fHTML;

  // Cal stats
  const todayDone = HABITS.filter((_, hi) => habitGrid[hi][TODAY_IDX]).length;
  document.getElementById('cal-today').textContent = `${todayDone}/${HABITS.length}`;
  const total = habitGrid.reduce((s,row)=>s+row.reduce((a,b)=>a+b,0),0);
  document.getElementById('cal-total').textContent = total;
  document.getElementById('cal-streak').textContent = getBestStreak();
  const possible = HABITS.length * (TODAY_IDX+1);
  const pct = possible > 0 ? Math.round(total/possible*100) : 0;
  document.getElementById('cal-pct').textContent = pct + '%';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER AI/ML
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderML() {
  let html = '';
  let globalDay = 0;
  ML_WEEKS.forEach((week, wi) => {
    html += `<div class="week-block"><div class="week-title">${week.title}</div><div class="days-list">`;
    week.days.forEach((day, di) => {
      const gd = globalDay;
      const isFuture = gd > TODAY_IDX;
      const allDone = day.tasks.every((_, ti) => mlTasks[`${wi}_${di}_${ti}`]);
      html += `<div class="ml-card${allDone?' done-card':''}">`;
      html += `<div class="ml-card-head"><div class="ml-daynum">Ğ”Ğ•ĞĞ¬ ${gd+1} Â· ${formatDate(getDayDate(gd))}</div>${allDone?'<div class="ml-badge">âœ“ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾</div>':''}</div>`;
      html += `<div class="ml-topic">${day.topic}</div><ul class="ml-tasks">`;
      day.tasks.forEach((task, ti) => {
        const key = `${wi}_${di}_${ti}`;
        const done = mlTasks[key];
        html += `<li class="ml-task${done?' done-task':''}${isFuture?' future-task':''}" onclick="toggleML('${key}')">
          <div class="ml-task-cb"></div>
          <div class="ml-task-text">${task}</div>
        </li>`;
      });
      html += '</ul></div>';
      globalDay++;
    });
    html += '</div></div>';
  });
  document.getElementById('ml-container').innerHTML = html;

  const { totalTasks, doneTasks, doneDays } = getMlStats();
  const pct = totalTasks > 0 ? Math.round(doneTasks/totalTasks*100) : 0;
  document.getElementById('ml-done').textContent = doneDays;
  document.getElementById('ml-tasks').textContent = doneTasks;
  document.getElementById('ml-pct').textContent = pct + '%';
  document.getElementById('ml-week').textContent = Math.min(Math.floor(TODAY_IDX/7)+1, 4);
  document.getElementById('ml-prog-pct').textContent = pct + '%';
  document.getElementById('ml-prog-fill').style.width = pct + '%';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER OVERVIEW
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderOverview() {
  document.getElementById('ov-day').textContent = TODAY_IDX + 1;
  document.getElementById('td-date').textContent = formatDate(getDayDate(TODAY_IDX));

  const todayDone = HABITS.filter((_, hi) => habitGrid[hi][TODAY_IDX]).length;
  document.getElementById('ov-habits').textContent = Math.round(todayDone/HABITS.length*100) + '%';

  const { totalTasks, doneTasks } = getMlStats();
  const mlPct = totalTasks > 0 ? Math.round(doneTasks/totalTasks*100) : 0;
  document.getElementById('ov-ml').textContent = mlPct + '%';
  document.getElementById('ov-streak').textContent = getBestStreak() + 'ğŸ”¥';

  const total = habitGrid.reduce((s,row)=>s+row.reduce((a,b)=>a+b,0),0);
  const possible = HABITS.length * (TODAY_IDX+1);
  const hPct = possible > 0 ? Math.round(total/possible*100) : 0;
  const combined = Math.round((hPct + mlPct) / 2);
  document.getElementById('ov-total-pct').textContent = combined + '%';
  document.getElementById('ov-prog-fill').style.width = combined + '%';

  // Today ML
  const mlDay = getDayML(TODAY_IDX);
  document.getElementById('td-mltopic').textContent = mlDay ? `Ğ”ĞµĞ½ÑŒ ${TODAY_IDX+1} â€” ${mlDay.day.topic}` : 'â€”';

  // Today habits
  document.getElementById('td-habits-list').innerHTML = HABITS.map((h, hi) => {
    const done = habitGrid[hi][TODAY_IDX];
    return `<div style="display:flex;align-items:center;gap:8px;padding:5px 0;border-bottom:1px solid var(--border);cursor:pointer" onclick="quickToggle(${hi})">
      <div style="width:14px;height:14px;border:1.5px solid ${done?h.color:'var(--border2)'};border-radius:3px;background:${done?h.color:'transparent'};display:flex;align-items:center;justify-content:center;flex-shrink:0">
        ${done?'<span style="color:#fff;font-size:9px;line-height:1">âœ“</span>':''}
      </div>
      <div style="font-size:11px;color:${done?'var(--green3)':'var(--text2)'}">${h.emoji} ${h.name}</div>
    </div>`;
  }).join('');

  // Today ML tasks
  if (mlDay) {
    document.getElementById('td-ml-list').innerHTML = mlDay.day.tasks.map((t, ti) => {
      const key = `${mlDay.wi}_${mlDay.di}_${ti}`;
      const done = mlTasks[key];
      return `<div style="display:flex;align-items:center;gap:8px;padding:5px 0;border-bottom:1px solid var(--border);cursor:pointer" onclick="quickToggleML('${key}')">
        <div style="width:14px;height:14px;border:1.5px solid ${done?'var(--blue2)':'var(--border2)'};border-radius:3px;background:${done?'var(--blue2)':'transparent'};display:flex;align-items:center;justify-content:center;flex-shrink:0">
          ${done?'<span style="color:#fff;font-size:9px;line-height:1">âœ“</span>':''}
        </div>
        <div style="font-size:11px;color:${done?'var(--blue3)':'var(--text2)'}">${t}</div>
      </div>`;
    }).join('');
  }

  // Habit mini bars
  document.getElementById('habit-mini-list').innerHTML = HABITS.map((h, hi) => {
    const done = habitGrid[hi].slice(0, TODAY_IDX+1).reduce((a,b)=>a+b,0);
    const p = (TODAY_IDX+1) > 0 ? Math.round(done/(TODAY_IDX+1)*100) : 0;
    return `<div class="mini-row">
      <div class="mini-name">${h.emoji} ${h.name}</div>
      <div class="mini-bar"><div class="mini-fill" style="width:${p}%;background:${h.color}"></div></div>
      <div class="mini-pct" style="color:${pctColor(p)}">${p}%</div>
    </div>`;
  }).join('');

  // ML week bars
  document.getElementById('mlweek-mini-list').innerHTML = ML_WEEKS.map((w, wi) => {
    let wT = 0, wD = 0;
    w.days.forEach((d, di) => d.tasks.forEach((_, ti) => { wT++; if(mlTasks[`${wi}_${di}_${ti}`]) wD++; }));
    const p = wT > 0 ? Math.round(wD/wT*100) : 0;
    const title = w.title.replace(/^.*?â€”\s*/,'').substring(0,24);
    return `<div class="mini-row">
      <div class="mini-name" style="font-size:10px">${title}</div>
      <div class="mini-bar"><div class="mini-fill" style="width:${p}%;background:var(--blue2)"></div></div>
      <div class="mini-pct" style="color:var(--blue3)">${p}%</div>
    </div>`;
  }).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ACTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleHabit(hi, d) {
  if (d > TODAY_IDX) return;
  habitGrid[hi][d] = habitGrid[hi][d] ? 0 : 1;
  save();
  renderAll();
}

function quickToggle(hi) { toggleHabit(hi, TODAY_IDX); }

function toggleML(key) {
  mlTasks[key] = !mlTasks[key];
  save();
  renderML();
  renderOverview();
}

function quickToggleML(key) { toggleML(key); }

function showTab(id, btn) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('tab-'+id).classList.add('active');
  if (btn) btn.classList.add('active');
}

function renderAll() {
  renderOverview();
  renderDayView();
  renderCalendar();
  renderML();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
renderAll();
</script>
</body>
</html>
